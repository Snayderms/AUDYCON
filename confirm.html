<script>
  const status = document.getElementById("status");
  const actions = document.getElementById("actions");

  function runConfirm() {
    // Supabase now returns query parameters (?foo=bar)
    const params = new URLSearchParams(window.location.search);

    const error = params.get("error");
    const type = params.get("type");

    if (error) {
      status.innerHTML = `<p class="error">Hubo un error verificando tu cuenta.</p>`;
      actions.innerHTML = `<a class="button" href="index.html">Volver al inicio</a>`;
      return;
    }

    if (type === "signup") {
      status.innerHTML = `<p class="success">¡Tu cuenta ha sido confirmada correctamente!</p>`;
      actions.innerHTML = `<a class="button" href="index.html">Iniciar sesión</a>`;
      return;
    }

    status.innerHTML = `<p class="error">No se detectó un estado válido.</p>`;
    actions.innerHTML = `<a class="button" href="index.html">Volver al inicio</a>`;
  }

  runConfirm();
</script>
